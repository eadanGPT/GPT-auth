
<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Secure Mineflayer Client</title>
<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<link rel="icon" href="data:,">
</head><body class="bg-slate-950 text-slate-100">
<div id="root" class="p-4"></div>
<script type="text/babel" data-type="module">
function useWS(url){
  const [data, setData] = React.useState(null);
  React.useEffect(()=>{
    const ws = new WebSocket(url);
    ws.onmessage = (e)=> setData(JSON.parse(e.data));
    return ()=> ws.close();
  }, [url]);
  return data;
}
function LicenseGate(){ 
  const [k, setK] = React.useState(localStorage.getItem('client_key')||'');
  if (!k) {
    return (<div className="max-w-md mx-auto p-4 bg-slate-900 rounded-2xl shadow">
      <h1 className="text-2xl font-bold mb-2">Enter License Key</h1>
      <p className="text-sm text-slate-400 mb-4">The client UI appears only when no Client key is present. Enter a key to claim and continue.</p>
      <form onSubmit={(e)=>{e.preventDefault(); const v=e.target.k.value.trim(); if(!v) return; localStorage.setItem('client_key', v); location.reload();}}>
        <input name="k" placeholder="License Key" className="w-full px-3 py-2 rounded bg-slate-800 border border-slate-700 focus:outline-none mb-3"/>
        <button className="px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500">Claim</button>
      </form>
    </div>);
  }
  return null;
}
function Dashboard(){
  const frame = useWS(`ws://${location.host}/live`);
  const [inv, setInv] = React.useState([]);
  const refresh = async ()=>{
    const r = await fetch('/api/inventory').then(r=>r.json());
    setInv(r.items||[]);
  };
  React.useEffect(()=>{ refresh(); },[]);
  if (!localStorage.getItem('client_key')) return null;
  return (<div className="grid gap-4 grid-cols-1 lg:grid-cols-3">
    <div className="bg-slate-900 rounded-2xl p-4 shadow col-span-1">
      <h2 className="font-semibold text-lg mb-2">Bot Health</h2>
      <pre className="text-emerald-400 whitespace-pre-wrap h-48 overflow-auto">{JSON.stringify(frame,null,2)}</pre>
    </div>
    <div className="bg-slate-900 rounded-2xl p-4 shadow col-span-2">
      <div className="flex items-center justify-between mb-2"><h2 className="font-semibold text-lg">Inventory</h2><button onClick={refresh} className="px-3 py-1 rounded bg-blue-600 hover:bg-blue-500">Refresh</button></div>
      <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
        {inv.map((it,i)=>(<div key={i} className="rounded-xl bg-slate-800 p-2 border border-slate-700">
          <div className="text-sm">{it.name}</div>
          <div className="text-xs text-slate-400">#{it.slot}</div>
          <div className="text-sm font-mono">x{it.count}</div>
        </div>))}
        {inv.length===0 && <div className="text-slate-400">No items.</div>}
      </div>
    </div>
  </div>);
}
function App(){
  return (<div className="space-y-4">
    <header className="flex items-center justify-between">
      <h1 className="text-2xl font-bold">Secure Mineflayer Client</h1>
      <button className="text-sm text-slate-400 hover:text-slate-200" onClick={()=>{localStorage.removeItem('client_key'); location.reload();}}>Reset License</button>
    </header>
    <LicenseGate/>
    <Dashboard/>
  </div>);
}
ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body></html>
