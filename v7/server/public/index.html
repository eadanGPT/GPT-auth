<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Admin</title><style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;padding:20px}table{border-collapse:collapse;width:100%}th,td{border:1px solid #ccc;padding:8px}th{background:#fafafa}</style></head><body><h1>Live Sessions</h1><div id="login"><input type="password" id="pw" placeholder="admin password"/><button onclick="login()">Login</button></div><div id="panel" style="display:none"><button onclick="refresh()">Refresh</button><table id="tbl"><thead><tr><th>SID</th><th>Key</th><th>IP</th><th>Since</th><th>Solved</th><th>Failed</th></tr></thead><tbody></tbody></table></div><script>
async function login(){const pw=document.getElementById('pw').value;const r=await fetch('/admin/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({password:pw})});if(r.ok){document.getElementById('login').style.display='none';document.getElementById('panel').style.display='block';refresh();}else alert('bad password');}
async function refresh(){const r=await fetch('/admin/active'); if(!r.ok) return alert('not authed'); const {list}=await r.json(); const tb=document.querySelector('#tbl tbody'); tb.innerHTML=''; list.forEach(row=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${row.sid}</td><td>${row.keyhash||''}</td><td>${row.ip}</td><td>${new Date(row.since).toLocaleString()}</td><td>${row.solved}</td><td>${row.failed}</td>`; tb.appendChild(tr);});}
</script></body></html>
